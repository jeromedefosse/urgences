<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Formulaire ATU - Traumatologie</title>
  <!-- Librairie jsPDF pour export PDF c√¥t√© navigateur (optionnel) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    fieldset {
      margin-bottom: 20px; padding: 10px;
      border: 1px solid #ccc; border-radius: 5px;
    }
    legend {
      font-weight: bold; color: #007BFF;
    }
    .alert {
      margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;
    }
    .hidden { display: none !important; }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // -----------------------------------------
      // 1) Choix du service + affichage sous-sections
      // -----------------------------------------
      const serviceSelect = document.getElementById("serviceSelectTop");
      // Sous-sections pour d'autres services (bloc, medecine, etc.)
      const sousSections = {
        bloc: "sousSectionBloc",
        soins_palliatifs: "sousSectionPalliatif",
        medecine: "sousSectionMedecine",
        chirurgie: "sousSectionChirurgie",
        ambulatoire: "sousSectionAmbulatoire",
        chimiotherapie: "sousSectionChimiotherapie",
        hopital_jour: "sousSectionHopitalJour",
        soins_externes: "sousSectionSoinsExternes"
      };
      function afficherSousSection(service) {
        Object.entries(sousSections).forEach(([key, id]) => {
          const section = document.getElementById(id);
          if (section) section.style.display = (key === service) ? "block" : "none";
        });
      }
      serviceSelect.addEventListener("change", function () {
        const selectedService = this.value;
        afficherSousSection(selectedService);

        // M√†j en-t√™te
        const displayedService = document.getElementById("displayedService");
        const selectedOption = this.options[this.selectedIndex];
        if (displayedService && selectedOption) {
          displayedService.textContent = "Service : " + selectedOption.textContent.trim();
        }

        // Affichage sp√©cifique si urgences
        const filiereUrgences = document.getElementById("filiereUrgences");
        filiereUrgences.style.display = (selectedService === "urgences") ? "block" : "none";
      });

      // -----------------------------------------
      // 2) Si "fili√®re longue" => tri: courte/longue
      // -----------------------------------------
      const radioFiliere = document.querySelectorAll('input[name="filiereUrg"]');
      radioFiliere.forEach(r => {
        r.addEventListener("change", () => {
          const val = document.querySelector('input[name="filiereUrg"]:checked')?.value;
          // Afficher la section "courte" ou "longue"
          document.getElementById("sectionCourte").style.display = (val === "courte") ? "block" : "none";
          document.getElementById("sectionLongue").style.display = (val === "longue") ? "block" : "none";
        });
      });

      // -----------------------------------------
      // 3) Dans la fili√®re longue : orientation finale
      // -----------------------------------------
      const radioOrientation = document.querySelectorAll('input[name="orientationLongue"]');
      radioOrientation.forEach(r => {
        r.addEventListener("change", () => {
          const val = document.querySelector('input[name="orientationLongue"]:checked')?.value;
          document.getElementById("uhcdSections").style.display = (val === "hospitalisation_uhcd") ? "block" : "none";
        });
      });

      // -----------------------------------------
      // 4) Indicateurs par section (complet / partiel / vide)
      // -----------------------------------------
      const fieldsets = document.querySelectorAll("fieldset");
      fieldsets.forEach(fieldset => {
        const checkboxes = fieldset.querySelectorAll("input[type='checkbox']");
        const alertDiv = fieldset.querySelector(".alert");
        if (!alertDiv || checkboxes.length === 0) return;

        function updateAlert() {
          const total = checkboxes.length;
          const checked = fieldset.querySelectorAll("input[type='checkbox']:checked").length;
          if (checked === total) {
            alertDiv.textContent = "‚úÖ √âtape conforme";
            alertDiv.style.backgroundColor = "#d4edda";
            alertDiv.style.color = "#155724";
            alertDiv.style.border = "1px solid #c3e6cb";
          } else if (checked === 0) {
            alertDiv.textContent = "‚õî Aucune case coch√©e";
            alertDiv.style.backgroundColor = "#f8d7da";
            alertDiv.style.color = "#721c24";
            alertDiv.style.border = "1px solid #f5c6cb";
          } else {
            alertDiv.textContent = "‚ö†Ô∏è √âtape partiellement remplie";
            alertDiv.style.backgroundColor = "#fff3cd";
            alertDiv.style.color = "#856404";
            alertDiv.style.border = "1px solid #ffeeba";
          }
        }
        checkboxes.forEach(cb => cb.addEventListener("change", updateAlert));
        updateAlert();
      });

      // -----------------------------------------
      // 5) Score global
      // -----------------------------------------
      const alertBox = document.getElementById("globalConformityAlert");
      const allCheckboxes = document.querySelectorAll("input[type='checkbox']");
      function updateGlobalScore() {
        const total = allCheckboxes.length;
        const checked = document.querySelectorAll("input[type='checkbox']:checked").length;
        const percent = Math.round((checked / total) * 100);

        if (percent === 100) {
          alertBox.textContent = `üü¢ Dossier complet : ${percent}%`;
          alertBox.style.backgroundColor = "#d4edda";
          alertBox.style.color = "#155724";
          alertBox.style.border = "1px solid #c3e6cb";
        } else if (percent >= 60) {
          alertBox.textContent = `üü† Dossier partiellement conforme : ${percent}%`;
          alertBox.style.backgroundColor = "#fff3cd";
          alertBox.style.color = "#856404";
          alertBox.style.border = "1px solid #ffeeba";
        } else {
          alertBox.textContent = `üî¥ Dossier incomplet : ${percent}%`;
          alertBox.style.backgroundColor = "#f8d7da";
          alertBox.style.color = "#721c24";
          alertBox.style.border = "1px solid #f5c6cb";
        }
      }
      allCheckboxes.forEach(cb => cb.addEventListener("change", updateGlobalScore));
      updateGlobalScore();

      // Remplir date auto si vide
      const autoDateField = document.getElementById("autoDate");
      if (autoDateField && !autoDateField.value) {
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        autoDateField.value = `${yyyy}-${mm}-${dd}`;
      }
    });
  </script>
</head>

<body>

<h2 style="color:#007BFF; font-size:16pt;">Polyclinique C√¥te Basque Sud</h2>
<h3 id="displayedService" style="color:#007BFF; font-size:14pt;">Service : </h3>
<h4 id="displayedFiliere" style="color:#007BFF; font-size:13pt; font-weight:normal;">Fili√®re : </h4>

<!-- S√©lection du service (affiche sous-sections bloc, palliatif, etc.) -->
<fieldset>
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">S√©lection initiale du service</legend>
  <select id="serviceSelectTop" style="font-size:1.1em; font-weight:bold; color:#007BFF;">
    <option value="">-- S√©lectionner --</option>
    <option value="urgences">Urgences</option>
    <option value="bloc">Bloc</option>
    <option value="medecine">M√©decine</option>
    <option value="soins_palliatifs">Soins palliatifs</option>
    <option value="chirurgie">Chirurgie</option>
    <option value="ambulatoire">Ambulatoire</option>
    <!-- etc. -->
  </select>
</fieldset>

<!-- Coordonn√©es patient -->
<label>Nom patient : <input type="text" name="nomPatient"></label><br>
<label>Pr√©nom patient : <input type="text" name="prenomPatient"></label><br>
<label>Date de naissance : <input type="date" name="dateNaissance"></label><br>
<label>Date : <input type="date" id="autoDate"></label><br>

<!-- URGENCES : fili√®re courte/longue -->
<fieldset id="filiereUrgences" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt;">Fili√®re urgences</legend>
  <label><input type="radio" name="filiereUrg" value="courte"> Fili√®re courte</label>
  <label><input type="radio" name="filiereUrg" value="longue"> Fili√®re longue</label>
</fieldset>

<!-- SECTION COURTE - FILI√àRE URGENCES -->
<fieldset id="sectionCourte" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt;">Fili√®re Courte (Urgences)</legend>

<!-- ===== SECTION √âVALUATION ET TRIAGE IOA ou IDE ===== -->
<fieldset id="ancrage-triage">
  <label for="medecinReferent" style="display:block; margin-bottom:5px; font-weight:bold;">Nom du m√©decin r√©f√©rent :</label>
  <input type="text" id="medecinReferent" name="medecinReferent" style="width:100%; margin-bottom:15px;">
  <fieldset id="ancrage-triage">
    <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">√âvaluation et triage IOA ou IDE</legend>
    <ul>
      <li><input type="checkbox"> V√©rification des informations d'identitovigilance</li>
      <li><input type="checkbox"> Int√©gration au dossier des ordonnances en cours</li>
      <li><input type="checkbox"> Int√©gration au dossier des ant√©c√©dents m√©dicaux</li>
      <li><input type="checkbox"> Motif d‚Äôadmission document√©</li>
      <li><input type="checkbox"> Contexte clinique pr√©cis√©</li>
      <li><input type="checkbox"> Sympt√¥mes rapport√©s trac√©s</li>
      <li><input type="checkbox"> √âvaluation clinique initiale r√©alis√©e</li>
      <li><input type="checkbox"> Score FRENCH ou triage formel document√©</li>
      <li><input type="checkbox"> Priorisation valid√©e par l'IDE ou l'IOA</li>
      <li><input type="checkbox"> Contexte et motif d'admission r√©√©valu√©s</li>
      <li><input type="checkbox"> Risques identifi√©s et trac√©s (douleur, confusion, chute...)</li>
      <li><input type="checkbox"> Plan de surveillance adapt√© mis en ≈ìuvre</li>
      <li><input type="checkbox"> Information du patient assur√©e et trac√©e</li>
    </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="courtTriageComment" placeholder="Commentaires ou anomalies lors du triage (fili√®re courte)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prise en charge de la douleur -->
  <p><strong>Prise en charge de la douleur</strong></p>
  <ul>
    <li><input type="checkbox"> √âvaluation initiale de la douleur (EVA, EN, h√©t√©ro-√©valuation)</li>
    <li><input type="checkbox"> Tra√ßabilit√© de l‚Äôintensit√© de la douleur dans le dossier</li>
    <li><input type="checkbox"> Prescription antalgique adapt√©e au niveau de douleur</li>
    <li><input type="checkbox"> Administration du traitement antalgique r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation de l‚Äôefficacit√© du traitement r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation trac√©e dans le dossier</li>
    <li><input type="checkbox"> Adaptation du traitement si n√©cessaire</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
   <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="courtDouleurComment" placeholder="Commentaires ou anomalies de PEC de la douleur (fili√®re courte)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prescriptions initiales et soins imm√©diats -->
  <p><strong>Prescriptions initiales et soins imm√©diats</strong></p>
  <ul>
    <li><input type="checkbox"> Prescription m√©dicale initiale document√©e</li>
    <li><input type="checkbox"> Administration des soins r√©alis√©e selon prescription</li>
    <li><input type="checkbox"> Surveillance infirmi√®re mise en place apr√®s soins</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes infirmiers dans le DPI</li>
    <li><input type="checkbox"> Ordonnances imprim√©es ou transmises</li>
    <li><input type="checkbox"> V√©rification de la bonne compr√©hension par le patient</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="longTriageComment" placeholder="Commentaires ou anomalies lors du triage (fili√®re longue)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prise en charge m√©dicale -->
  <p><strong>Prise en charge m√©dicale</strong></p>
  <ul>
    <li><input type="checkbox"> üîπ Information claire du patient sur les d√©cisions m√©dicales</li>
    <li><input type="checkbox"> üîπ Consentement √©clair√© recueilli et trac√© si requis</li>
    <li><input type="checkbox"> üîπ Examen clinique complet effectu√©</li>
    <li><input type="checkbox"> üîπ Hypoth√®ses diagnostiques pos√©es</li>
    <li><input type="checkbox"> üîπ Examens compl√©mentaires prescrits et trac√©s</li>
    <li><input type="checkbox"> üîπ Interpr√©tation des r√©sultats int√©gr√©e au dossier</li>
    <li><input type="checkbox"> üîπ D√©cision m√©dicale argument√©e (PEC, hospitalisation, retour domicile...)</li>
    <li><input type="checkbox"> üîπ Information du patient sur la strat√©gie m√©dicale</li>
    <li><input type="checkbox"> üîπ Tra√ßabilit√© des √©l√©ments m√©dicaux dans le DPI</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox"
      onclick="
        const fieldset = this.closest('fieldset');
        const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
        const alertDiv = fieldset.querySelectorAll('.alert')[3];
        const confirmMsg = this.checked ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?' : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
        if (confirm(confirmMsg)) {
          checkboxes.forEach(cb => cb.checked = this.checked);
          alertDiv?.dispatchEvent(new Event('change'));
        } else {
          this.checked = !this.checked;
        }
      "
    > ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="pecMedicalComment" placeholder="Commentaires ou anomalies dans la prise en charge m√©dicale..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- V√©rification de la compl√©tude du DPI -->
  <p><strong>V√©rification de la compl√©tude du DPI</strong></p>
  <ul>
    <li><input type="checkbox"> Donn√©es administratives compl√®tes et valid√©es</li>
    <li><input type="checkbox"> Fiche d‚Äôidentitovigilance int√©gr√©e et conforme</li>
    <li><input type="checkbox"> Tra√ßabilit√© compl√®te des soins infirmiers (observations, actes, √©valuations)</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes m√©dicaux (consultation, examens, prescriptions)</li>
    <li><input type="checkbox"> R√©sultats des examens compl√©mentaires int√©gr√©s</li>
    <li><input type="checkbox"> Compte rendu m√©dical et synth√®se de sortie pr√©sents</li>
    <li><input type="checkbox"> Consentements et informations patient int√©gr√©s</li>
    <li><input type="checkbox"> Codages administratifs et m√©dicaux saisis (CIM-10, GEMSA, CCMU...)</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;\">
    <input type="checkbox"
      onclick="
        const fieldset = this.closest('fieldset');
        const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
        const alertDiv = fieldset.querySelectorAll('.alert')[4];
        const confirmMsg = this.checked ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?' : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
        if (confirm(confirmMsg)) {
          checkboxes.forEach(cb => cb.checked = this.checked);
          alertDiv?.dispatchEvent(new Event('change'));
        } else {
          this.checked = !this.checked;
        }
      
    > ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="dpiCompletenessComment" placeholder="Commentaires sur la compl√©tude du dossier dans le DPI..." style="width:100%; height:60px;\"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;\"></div>


  <!-- Orientation -->
  <p><strong>Orientation</strong></p>
  <label><input type="radio" name="orientationCourte" value="domicile"> Retour √† domicile (liste de documents √† remettre)</label><br>
  <label><input type="radio" name="orientationlongue" value="hospitalisation"> Hospitalisation (UHCD, m√©decine, chirurgie, soins palliatifs, GCS...)</label><br>
  <label><input type="radio" name="orientationlongue" value="transfert"> Transfert (pr√©parer sections correspondant au transfert)</label><br>
</fieldset>
  <!-- Message sp√©cifique √† la fili√®re courte si hospitalisation ou transfert -->
  <div id="alerteFiliereCourte" style="display:none; margin-top:15px; padding:10px; background-color:#fff3cd; border:1px solid #ffeeba; color:#856404; border-radius:5px; font-weight:bold;">
    ‚ö†Ô∏è Le patient est orient√© vers une hospitalisation ou un transfert. Veuillez basculer en <strong>fili√®re longue</strong> pour activer les sections correspondantes.
  </div>

  <!-- Documents √† remettre √† la sortie (si retour √† domicile) -->
  <div id="documentsSortieCourte" style="margin-top:15px;">
    <p><strong>üìÑ Documents √† remettre au patient (retour √† domicile) :</strong></p>
    <ul>
      <li><input type="checkbox"> Lettre de sortie</li>
      <li><input type="checkbox"> Ordonnances</li>
      <li><input type="checkbox"> Consignes de surveillance</li>
      <li><input type="checkbox"> RDV post-urgence si n√©cessaire</li>
      <li><input type="checkbox"> Arr√™t de travail (si indiqu√©)</li>
    </ul>
    <p><strong>üíª V√©rification du dossier informatique :</strong></p>
    <ul>
      <li><input type="checkbox"> Codage GEMSA / CIM-10 saisi</li>
      <li><input type="checkbox"> Compte rendu m√©dical int√©gr√©</li>
      <li><input type="checkbox"> Fiche de liaison IDE enregistr√©e</li>
    </ul>
  </div>
</fieldset>

<!-- SECTION LONGUE -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const serviceSelect = document.getElementById("selectService");
    const filiereSelect = document.getElementById("selectFiliere");

    if (serviceSelect && filiereSelect) {
      function afficherFiliere() {
        const filiere = filiereSelect.value;
        const filiereLongue = document.getElementById("sectionLongue");

        // Cacher ou afficher la fili√®re longue
        if (filiere === "longue") {
          filiereLongue.style.display = "block";
        } else {
          filiereLongue.style.display = "none";
        }
      }

      filiereSelect.addEventListener("change", afficherFiliere);
      afficherFiliere(); // Initialiser √† l'affichage
    }
  });
</script>
<fieldset id="sectionlongue" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt;">Fili√®re longue (Urgences)</legend>

<!-- ===== SECTION √âVALUATION ET TRIAGE IOA ou IDE ===== -->
<fieldset id="ancrage-triage">
  <label for="medecinReferent" style="display:block; margin-bottom:5px; font-weight:bold;">Nom du m√©decin r√©f√©rent :</label>
  <input type="text" id="medecinReferent" name="medecinReferent" style="width:100%; margin-bottom:15px;">
  <fieldset id="ancrage-triage">
    <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">√âvaluation et triage IOA ou IDE</legend>
    <ul>
      <li><input type="checkbox"> V√©rification des informations d'identitovigilance</li>
      <li><input type="checkbox"> Int√©gration au dossier des ordonnances en cours</li>
      <li><input type="checkbox"> Int√©gration au dossier des ant√©c√©dents m√©dicaux</li>
      <li><input type="checkbox"> Motif d‚Äôadmission document√©</li>
      <li><input type="checkbox"> Contexte clinique pr√©cis√©</li>
      <li><input type="checkbox"> Sympt√¥mes rapport√©s trac√©s</li>
      <li><input type="checkbox"> √âvaluation clinique initiale r√©alis√©e</li>
      <li><input type="checkbox"> Score FRENCH ou triage formel document√©</li>
      <li><input type="checkbox"> Priorisation valid√©e par l'IDE ou l'IOA</li>
      <li><input type="checkbox"> Contexte et motif d'admission r√©√©valu√©s</li>
      <li><input type="checkbox"> Risques identifi√©s et trac√©s (douleur, confusion, chute...)</li>
      <li><input type="checkbox"> Plan de surveillance adapt√© mis en ≈ìuvre</li>
      <li><input type="checkbox"> Information du patient assur√©e et trac√©e</li>
    </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="longTriageComment" placeholder="Commentaires ou anomalies lors du triage (fili√®re longue)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prise en charge de la douleur -->
  <p><strong>Prise en charge de la douleur</strong></p>
  <ul>
    <li><input type="checkbox"> √âvaluation initiale de la douleur (EVA, EN, h√©t√©ro-√©valuation)</li>
    <li><input type="checkbox"> Tra√ßabilit√© de l‚Äôintensit√© de la douleur dans le dossier</li>
    <li><input type="checkbox"> Prescription antalgique adapt√©e au niveau de douleur</li>
    <li><input type="checkbox"> Administration du traitement antalgique r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation de l‚Äôefficacit√© du traitement r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation trac√©e dans le dossier</li>
    <li><input type="checkbox"> Adaptation du traitement si n√©cessaire</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
   <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="longDouleurComment" placeholder="Commentaires ou anomalies de PEC de la douleur (fili√®re longue)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prescriptions initiales et soins imm√©diats -->
  <p><strong>Prescriptions initiales et soins imm√©diats</strong></p>
  <ul>
    <li><input type="checkbox"> Prescription m√©dicale initiale document√©e</li>
    <li><input type="checkbox"> Administration des soins r√©alis√©e selon prescription</li>
    <li><input type="checkbox"> Surveillance infirmi√®re mise en place apr√®s soins</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes infirmiers dans le DPI</li>
    <li><input type="checkbox"> Ordonnances imprim√©es ou transmises</li>
    <li><input type="checkbox"> V√©rification de la bonne compr√©hension par le patient</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="longTriageComment" placeholder="Commentaires ou anomalies lors du triage (fili√®re longue)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- Prise en charge m√©dicale -->
  <p><strong>Prise en charge m√©dicale</strong></p>
  <ul>
    <li><input type="checkbox"> üîπ Information claire du patient sur les d√©cisions m√©dicales</li>
    <li><input type="checkbox"> üîπ Consentement √©clair√© recueilli et trac√© si requis</li>
    <li><input type="checkbox"> üîπ Examen clinique complet effectu√©</li>
    <li><input type="checkbox"> üîπ Hypoth√®ses diagnostiques pos√©es</li>
    <li><input type="checkbox"> üîπ Examens compl√©mentaires prescrits et trac√©s</li>
    <li><input type="checkbox"> üîπ Interpr√©tation des r√©sultats int√©gr√©e au dossier</li>
    <li><input type="checkbox"> üîπ D√©cision m√©dicale argument√©e (PEC, hospitalisation, retour domicile...)</li>
    <li><input type="checkbox"> üîπ Information du patient sur la strat√©gie m√©dicale</li>
    <li><input type="checkbox"> üîπ Tra√ßabilit√© des √©l√©ments m√©dicaux dans le DPI</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox"
      onclick="
        const fieldset = this.closest('fieldset');
        const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
        const alertDiv = fieldset.querySelectorAll('.alert')[3];
        const confirmMsg = this.checked ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?' : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
        if (confirm(confirmMsg)) {
          checkboxes.forEach(cb => cb.checked = this.checked);
          alertDiv?.dispatchEvent(new Event('change'));
        } else {
          this.checked = !this.checked;
        }
      "
    > ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="pecMedicalComment" placeholder="Commentaires ou anomalies dans la prise en charge m√©dicale..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

  <!-- V√©rification de la compl√©tude du DPI -->
  <p><strong>V√©rification de la compl√©tude du DPI</strong></p>
  <ul>
    <li><input type="checkbox"> Donn√©es administratives compl√®tes et valid√©es</li>
    <li><input type="checkbox"> Fiche d‚Äôidentitovigilance int√©gr√©e et conforme</li>
    <li><input type="checkbox"> Tra√ßabilit√© compl√®te des soins infirmiers (observations, actes, √©valuations)</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes m√©dicaux (consultation, examens, prescriptions)</li>
    <li><input type="checkbox"> R√©sultats des examens compl√©mentaires int√©gr√©s</li>
    <li><input type="checkbox"> Compte rendu m√©dical et synth√®se de sortie pr√©sents</li>
    <li><input type="checkbox"> Consentements et informations patient int√©gr√©s</li>
    <li><input type="checkbox"> Codages administratifs et m√©dicaux saisis (CIM-10, GEMSA, CCMU...)</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;\">
    <input type="checkbox"
      onclick="
        const fieldset = this.closest('fieldset');
        const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
        const alertDiv = fieldset.querySelectorAll('.alert')[4];
        const confirmMsg = this.checked ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?' : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
        if (confirm(confirmMsg)) {
          checkboxes.forEach(cb => cb.checked = this.checked);
          alertDiv?.dispatchEvent(new Event('change'));
        } else {
          this.checked = !this.checked;
        }
      
    > ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="dpiCompletenessComment" placeholder="Commentaires sur la compl√©tude du dossier dans le DPI..." style="width:100%; height:60px;\"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;\"></div>

<!-- SECTION LONGUE - FILI√àRE URGENCES -->
<fieldset id="sectionLongue" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt;">Fili√®re Longue (Urgences)</legend>

  <!-- √âvaluation et triage IOA ou IDE -->
  <p><strong>√âvaluation et triage IOA ou IDE (fili√®re longue)</strong></p>
  <ul>
    <li><input type="checkbox"> V√©rification des informations d'identitovigilance</li>
    <li><input type="checkbox"> Int√©gration au dossier des ordonnances en cours</li>
    <li><input type="checkbox"> Int√©gration au dossier des ant√©c√©dents m√©dicaux</li>
    <li><input type="checkbox"> Motif d‚Äôadmission document√©</li>
    <li><input type="checkbox"> Contexte clinique pr√©cis√©</li>
    <li><input type="checkbox"> Sympt√¥mes rapport√©s trac√©s</li>
    <li><input type="checkbox"> √âvaluation clinique initiale r√©alis√©e</li>
    <li><input type="checkbox"> Score FRENCH ou triage formel document√©</li>
    <li><input type="checkbox"> Priorisation valid√©e par l'IDE ou l'IOA</li>
    <li><input type="checkbox"> Contexte et motif d'admission r√©√©valu√©s</li>
    <li><input type="checkbox"> Risques identifi√©s et trac√©s (douleur, confusion, chute...)</li>
    <li><input type="checkbox"> Plan de surveillance adapt√© mis en ≈ìuvre</li>
    <li><input type="checkbox"> Information du patient assur√©e et trac√©e</li>
  </ul>
  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('input[type=checkbox]');
      const alertDiv = fieldset.querySelectorAll('.alert')[0];
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>
  <textarea name="longTriageComment" placeholder="Commentaires ou anomalies lors du triage (fili√®re longue)..." style="width:100%; height:60px;"></textarea>
  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

 <!-- ===== SECTION PRISE EN CHARGE DE LA DOULEUR ===== -->
<fieldset id="ancrage-douleur">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Prise en charge de la douleur</legend>
  <ul>
    <li><input type="checkbox"> √âvaluation initiale de la douleur (EVA, EN, h√©t√©ro-√©valuation)</li>
    <li><input type="checkbox"> Tra√ßabilit√© de l‚Äôintensit√© de la douleur dans le dossier</li>
    <li><input type="checkbox"> Prescription antalgique adapt√©e au niveau de douleur</li>
    <li><input type="checkbox"> Administration du traitement antalgique r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation de l‚Äôefficacit√© du traitement r√©alis√©e</li>
    <li><input type="checkbox"> R√©√©valuation trac√©e dans le dossier</li>
    <li><input type="checkbox"> Adaptation du traitement si n√©cessaire</li>
  </ul>

  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('ul input[type=checkbox]');
      const alertDiv = fieldset.querySelector('.alert');
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>

  <textarea name="douleurComment" placeholder="Commentaires ou anomalies de PEC de la douleur..." style="width:100%; height:60px;"></textarea>

  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>
</fieldset>

<!-- ===== SECTION √âVALUATION ET TRIAGE IOA ou IDE ===== -->
<label for="medecinReferent" style="display:block; margin-bottom:5px; font-weight:bold;">Nom du m√©decin r√©f√©rent :</label>
<input type="text" id="medecinReferent" name="medecinReferent" style="width:100%; margin-bottom:15px;">
<fieldset id="ancrage-triage">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">√âvaluation et triage IOA ou IDE</legend>
  <ul>
    <li><input type="checkbox"> V√©rification des informations d'identitovigilance</li>
    <li><input type="checkbox"> Int√©gration au dossier des ordonnances en cours</li>
    <li><input type="checkbox"> Int√©gration au dossier des ant√©c√©dents m√©dicaux</li>
    <li><input type="checkbox"> Motif d‚Äôadmission document√©</li>
    <li><input type="checkbox"> Contexte clinique pr√©cis√©</li>
    <li><input type="checkbox"> Sympt√¥mes rapport√©s trac√©s</li>
    <li><input type="checkbox"> √âvaluation clinique initiale r√©alis√©e</li>
    <li><input type="checkbox"> Score FRENCH ou triage formel document√©</li>
    <li><input type="checkbox"> Priorisation valid√©e par l'IDE ou l'IOA</li>
    <li><input type="checkbox"> Contexte et motif d'admission r√©√©valu√©s</li>
    <li><input type="checkbox"> Risques identifi√©s et trac√©s (douleur, confusion, chute...)</li>
    <li><input type="checkbox"> Plan de surveillance adapt√© mis en ≈ìuvre</li>
    <li><input type="checkbox"> Information du patient assur√©e et trac√©e</li>
  </ul>

  <label style="display:block; margin-top:10px; font-weight:bold; color:#007BFF; font-size:13px;">
    <input type="checkbox" onclick="
      const fieldset = this.closest('fieldset');
      const checkboxes = fieldset.querySelectorAll('ul input[type=checkbox]');
      const alertDiv = fieldset.querySelector('.alert');
      const confirmMsg = this.checked
        ? '‚ö†Ô∏è Confirmez-vous vouloir cocher toute cette section ?'
        : 'Souhaitez-vous d√©cocher tous les √©l√©ments de cette section ?';
      if (confirm(confirmMsg)) {
        checkboxes.forEach(cb => cb.checked = this.checked);
        alertDiv?.dispatchEvent(new Event('change'));
      } else {
        this.checked = !this.checked;
      }
    ">
    ‚úÖ Marquer cette section comme conforme
  </label>

  <textarea name="triageComment" placeholder="Commentaires ou anomalies lors du triage..." style="width:100%; height:60px;"></textarea>

  <div class="alert" style="margin-top:10px; padding:5px; border-radius:5px; font-weight:bold;"></div>

   <!-- Message sp√©cifique √† la fili√®re courte si hospitalisation ou transfert -->
   <div id="alerteFiliereCourte" style="display:none; margin-top:15px; padding:10px; background-color:#fff3cd; border:1px solid #ffeeba; color:#856404; border-radius:5px; font-weight:bold;">
    ‚ö†Ô∏è Le patient est orient√© vers une hospitalisation ou un transfert. Veuillez basculer en <strong>fili√®re longue</strong> pour activer les sections correspondantes.
  </div>

  <!-- Documents √† remettre √† la sortie (si retour √† domicile) -->
  <div id="documentsSortieCourte" style="margin-top:15px;">
    <p><strong>üìÑ Documents √† remettre au patient (retour √† domicile) :</strong></p>
    <ul>
      <li><input type="checkbox"> Lettre de sortie</li>
      <li><input type="checkbox"> Ordonnances</li>
      <li><input type="checkbox"> Consignes de surveillance</li>
      <li><input type="checkbox"> RDV post-urgence si n√©cessaire</li>
      <li><input type="checkbox"> Arr√™t de travail (si indiqu√©)</li>
    </ul>
    <p><strong>üíª V√©rification du dossier informatique :</strong></p>
    <ul>
      <li><input type="checkbox"> Codage GEMSA / CIM-10 saisi</li>
      <li><input type="checkbox"> Compte rendu m√©dical int√©gr√©</li>
      <li><input type="checkbox"> Fiche de liaison IDE enregistr√©e</li>
    </ul>
  </div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const radios = document.querySelectorAll("input[name='orientationLongue']");
    radios.forEach(radio => {
      radio.addEventListener("change", () => {
        const uhcdSection = document.getElementById("sectionUHCD");
        const hospiSection = document.getElementById("sectionHospi");
        const transfertSection = document.getElementById("sectionTransfert");
        const geriatrieSection = document.getElementById("sectionGeriatrie");

        if (uhcdSection) uhcdSection.style.display = "none";
        if (hospiSection) hospiSection.style.display = "none";
        if (transfertSection) transfertSection.style.display = "none";
        if (geriatrieSection) geriatrieSection.style.display = "none";

        const uhcdSoins = document.getElementById("uhcdSoinsSurveillance");
        const uhcdAdmin = document.getElementById("uhcdAdministratif");
        const uhcdMed = document.getElementById("uhcdMedical");
        const uhcdSortie = document.getElementById("uhcdSortie");

        if (uhcdSoins) uhcdSoins.style.display = "none";
        if (uhcdAdmin) uhcdAdmin.style.display = "none";
        if (uhcdMed) uhcdMed.style.display = "none";
        if (uhcdSortie) uhcdSortie.style.display = "none";

        if (radio.checked) {
          if (radio.value === "uhcd" && uhcdSection) {
            uhcdSection.style.display = "block";
            if (uhcdSoins) uhcdSoins.style.display = "block";
            if (uhcdAdmin) uhcdAdmin.style.display = "block";
            if (uhcdMed) uhcdMed.style.display = "block";
            if (uhcdSortie) uhcdSortie.style.display = "block";
            uhcdSection.style.display = "block";
          } else if (radio.value === "medchir" && hospiSection) {
            hospiSection.style.display = "block";
          } else if (radio.value === "transfert" && transfertSection) {
            transfertSection.style.display = "block";
          } else if (radio.value === "geriatrie" && geriatrieSection) {
            geriatrieSection.style.display = "block";
          }
        }
      });
    });
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const radios = document.querySelectorAll("input[name='orientationUHCD']");
    radios.forEach(radio => {
      radio.addEventListener("change", () => {
        const soinsSection = document.getElementById("uhcdSoinsSurveillance");
        const administratifSection = document.getElementById("uhcdAdministratif");
        const medicalSection = document.getElementById("uhcdMedical");
        const sortieSection = document.getElementById("uhcdSortie");

        soinsSection.style.display = "none";
        administratifSection.style.display = "none";
        medicalSection.style.display = "none";
        sortieSection.style.display = "none";

        if (radio.value === "uhcd") {
          soinsSection.style.display = "block";
          administratifSection.style.display = "block";
          medicalSection.style.display = "block";
          sortieSection.style.display = "block";
        }
      });
    });
  });
</script>

</fieldset>

<!-- ===== SOUS-SECTIONS DYNAMIQUES UHCD ===== -->
<fieldset id="uhcdSoinsSurveillance" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Soins et surveillance IDE en UHCD</legend>
  <ul>
    <li><input type="checkbox"> Surveillance des constantes toutes les 6 heures</li>
    <li><input type="checkbox"> Surveillance douleur, confusion, risque de chute</li>
    <li><input type="checkbox"> Tra√ßabilit√© des param√®tres dans le DPI</li>
    <li><input type="checkbox"> R√©√©valuation r√©guli√®re et adaptation du traitement</li>
  </ul>
</fieldset>

<fieldset id="uhcdAdministratif" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Dossier administratif UHCD</legend>
  <ul>
    <li><input type="checkbox"> Cr√©ation du mouvement dans le logiciel administratif</li>
    <li><input type="checkbox"> Mise √† jour du dossier administratif dans le DPI</li>
    <li><input type="checkbox"> Accord √©crit du patient pour l‚Äôh√©bergement</li>
    <li><input type="checkbox"> Identification de la personne de confiance</li>
  </ul>
</fieldset>

<fieldset id="uhcdMedical" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Prise en charge m√©dicale en UHCD</legend>
  <ul>
    <li><input type="checkbox"> R√©√©valuation m√©dicale quotidienne</li>
    <li><input type="checkbox"> Prescription du traitement personnel</li>
    <li><input type="checkbox"> Prescription de traitements symptomatiques</li>
    <li><input type="checkbox"> Protocoles "si besoin" valid√©s</li>
    <li><input type="checkbox"> Prescriptions d'examens compl√©mentaires</li>
    <li><input type="checkbox"> Suivi des r√©sultats biologiques et d‚Äôimagerie</li>
  </ul>
</fieldset>

<fieldset id="uhcdSortie" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Sortie depuis l‚ÄôUHCD</legend>
  <ul>
    <li><input type="radio" name="sortieUHCD" value="domicile"> Retour √† domicile (documents de sortie √† remettre)</li>
    <li><input type="radio" name="sortieUHCD" value="hospitalisation"> Hospitalisation (m√©decine, chirurgie, g√©riatrie)</li>
    <li><input type="radio" name="sortieUHCD" value="transfert"> Transfert vers autre structure (r√©a, sp√©cialit√©, etc.)</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION EN UHCD ===== -->
<fieldset id="sectionUHCD" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation en UHCD</legend>
  <ul>
    <li><input type="checkbox"> Cr√©ation du mouvement en UHCD</li>
    <li><input type="checkbox"> Soins et surveillance infirmi√®re</li>
    <li><input type="checkbox"> Mise en place des surveillances sp√©cifiques</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes et √©valuations dans le DPI</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION M√âDECINE / CHIRURGIE ===== -->
<fieldset id="sectionHospi" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation M√©decine / Chirurgie</legend>
  <ul>
    <li><input type="checkbox"> Lettre de liaison</li>
    <li><input type="checkbox"> Prescription compl√®te sur 24h</li>
    <li><input type="checkbox"> Accord du patient pour chambre et prestations</li>
    <li><input type="checkbox"> Int√©gration DPI des documents n√©cessaires</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION G√âRIATRIE GCS ===== -->
<fieldset id="sectionGeriatrie" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation G√©riatrie ‚Äì GCS</legend>
  <ul>
    <li><input type="checkbox"> Demande de transfert valid√©e</li>
    <li><input type="checkbox"> Fiche de liaison g√©riatrique compl√©t√©e</li>
    <li><input type="checkbox"> Prescription adapt√©e √† la personne √¢g√©e</li>
    <li><input type="checkbox"> √âvaluation g√©riatrique initiale trac√©e</li>
  </ul>
</fieldset>

<!-- ===== SECTION TRANSFERT VERS AUTRE STRUCTURE ===== -->
<fieldset id="sectionTransfert" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Transfert vers autre structure</legend>
  <ul>
    <li><input type="checkbox"> Lettre de liaison / Fiche de transfert</li>
    <li><input type="checkbox"> Contact et accord avec la structure d‚Äôaccueil</li>
    <li><input type="checkbox"> Organisation du transport m√©dicalis√©</li>
    <li><input type="checkbox"> Consentement du patient recueilli</li>
  </ul>
</fieldset>

<!-- ===== SECTION FILI√àRE LONGUE ===== -->
<fieldset id="ancrage-filiere-longue" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Fili√®re Longue ‚Äì Urgences</legend>

  <p><strong>√âvaluation m√©dicale prolong√©e et prise en charge √©largie</strong></p>
  <ul>
    <li><input type="checkbox"> R√©√©valuation clinique r√©guli√®re</li>
    <li><input type="checkbox"> Prescription des traitements personnels du patient</li>
    <li><input type="checkbox"> Mise en place des traitements symptomatiques</li>
    <li><input type="checkbox"> Prescription en "si besoin" selon protocole</li>
    <li><input type="checkbox"> Examens compl√©mentaires prescrits (biologie, imagerie, etc.)</li>
    <li><input type="checkbox"> Surveillance infirmi√®re continue mise en ≈ìuvre</li>
    <li><input type="checkbox"> Coordination avec assistante sociale si besoin</li>
    <li><input type="checkbox"> Mise √† jour du dossier m√©dical et DPI</li>
  </ul>

  <p><strong>Pr√©paration √† l‚Äôorientation</strong></p>
  <ul>
    <li><input type="radio" name="orientationLongue" value="uhcd"> Hospitalisation en UHCD</li>
    <li><input type="radio" name="orientationLongue" value="medchir"> Hospitalisation M√©decine / Chirurgie / GCS</li>
    <li><input type="radio" name="orientationLongue" value="transfert"> Transfert vers autre √©tablissement</li>
    <li><input type="radio" name="orientationLongue" value="retour"> Retour √† domicile</li>
    <li><input type="radio" name="orientationLongue" value="geriatrie"> Hospitalisation G√©riatrie GCS</li>
  </ul>

  <div id="docFiliereLongue" style="margin-top:15px;">
    <p><strong>üìÑ Documents et v√©rifications √† effectuer :</strong></p>
    <ul>
      <li><input type="checkbox"> Lettre de liaison m√©dicale</li>
      <li><input type="checkbox"> Prescription sur 24h y compris traitements personnels</li>
      <li><input type="checkbox"> Accord du patient pour hospitalisation</li>
      <li><input type="checkbox"> Accord du m√©decin r√©f√©rent</li>
      <li><input type="checkbox"> Fiche d‚Äôorientation renseign√©e dans le DPI</li>
      <li><input type="checkbox"> Codage et compl√©tude dossier (CIM-10, GEMSA, CCMU)</li>
    </ul>
  </div>

  <textarea name="commentairesFiliereLongue" placeholder="Commentaires ou √©l√©ments sp√©cifiques √† la fili√®re longue..." style="width:100%; height:60px;"></textarea>
</fieldset>


<!-- ===== SOUS-SECTIONS DYNAMIQUES UHCD ===== -->
<fieldset id="uhcdSoinsSurveillance" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Soins et surveillance IDE en UHCD</legend>
  <ul>
    <li><input type="checkbox"> Surveillance des constantes toutes les 6 heures</li>
    <li><input type="checkbox"> Surveillance douleur, confusion, risque de chute</li>
    <li><input type="checkbox"> Tra√ßabilit√© des param√®tres dans le DPI</li>
    <li><input type="checkbox"> R√©√©valuation r√©guli√®re et adaptation du traitement</li>
  </ul>
</fieldset>

<fieldset id="uhcdAdministratif" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Dossier administratif UHCD</legend>
  <ul>
    <li><input type="checkbox"> Cr√©ation du mouvement dans le logiciel administratif</li>
    <li><input type="checkbox"> Mise √† jour du dossier administratif dans le DPI</li>
    <li><input type="checkbox"> Accord √©crit du patient pour l‚Äôh√©bergement</li>
    <li><input type="checkbox"> Identification de la personne de confiance</li>
  </ul>
</fieldset>

<fieldset id="uhcdMedical" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Prise en charge m√©dicale en UHCD</legend>
  <ul>
    <li><input type="checkbox"> R√©√©valuation m√©dicale quotidienne</li>
    <li><input type="checkbox"> Prescription du traitement personnel</li>
    <li><input type="checkbox"> Prescription de traitements symptomatiques</li>
    <li><input type="checkbox"> Protocoles "si besoin" valid√©s</li>
    <li><input type="checkbox"> Prescriptions d'examens compl√©mentaires</li>
    <li><input type="checkbox"> Suivi des r√©sultats biologiques et d‚Äôimagerie</li>
  </ul>
</fieldset>

<fieldset id="uhcdSortie" style="display:none;">
  <legend style="color:#007BFF; font-weight:bold;">Sortie depuis l‚ÄôUHCD</legend>
  <ul>
    <li><input type="radio" name="sortieUHCD" value="domicile"> Retour √† domicile (documents de sortie √† remettre)</li>
    <li><input type="radio" name="sortieUHCD" value="hospitalisation"> Hospitalisation (m√©decine, chirurgie, g√©riatrie)</li>
    <li><input type="radio" name="sortieUHCD" value="transfert"> Transfert vers autre structure (r√©a, sp√©cialit√©, etc.)</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION EN UHCD ===== -->
<fieldset id="sectionUHCD" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation en UHCD</legend>
  <ul>
    <li><input type="checkbox"> Cr√©ation du mouvement en UHCD</li>
    <li><input type="checkbox"> Soins et surveillance infirmi√®re</li>
    <li><input type="checkbox"> Mise en place des surveillances sp√©cifiques</li>
    <li><input type="checkbox"> Tra√ßabilit√© des actes et √©valuations dans le DPI</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION M√âDECINE / CHIRURGIE ===== -->
<fieldset id="sectionHospi" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation M√©decine / Chirurgie</legend>
  <ul>
    <li><input type="checkbox"> Lettre de liaison</li>
    <li><input type="checkbox"> Prescription compl√®te sur 24h</li>
    <li><input type="checkbox"> Accord du patient pour chambre et prestations</li>
    <li><input type="checkbox"> Int√©gration DPI des documents n√©cessaires</li>
  </ul>
</fieldset>

<!-- ===== SECTION HOSPITALISATION G√âRIATRIE GCS ===== -->
<fieldset id="sectionGeriatrie" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Hospitalisation G√©riatrie ‚Äì GCS</legend>
  <ul>
    <li><input type="checkbox"> Demande de transfert valid√©e</li>
    <li><input type="checkbox"> Fiche de liaison g√©riatrique compl√©t√©e</li>
    <li><input type="checkbox"> Prescription adapt√©e √† la personne √¢g√©e</li>
    <li><input type="checkbox"> √âvaluation g√©riatrique initiale trac√©e</li>
  </ul>
</fieldset>

<!-- ===== SECTION TRANSFERT VERS AUTRE STRUCTURE ===== -->
<fieldset id="sectionTransfert" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Transfert vers autre structure</legend>
  <ul>
    <li><input type="checkbox"> Lettre de liaison / Fiche de transfert</li>
    <li><input type="checkbox"> Contact et accord avec la structure d‚Äôaccueil</li>
    <li><input type="checkbox"> Organisation du transport m√©dicalis√©</li>
    <li><input type="checkbox"> Consentement du patient recueilli</li>
  </ul>
  <div class="alert"></div>
</fieldset>

<!-- ===== SECTION FILI√àRE LONGUE ===== -->
<fieldset id="ancrage-filiere-longue" style="display:none;">
  <legend style="color:#007BFF; font-size:13pt; font-weight:bold;">Fili√®re Longue ‚Äì Urgences</legend>

  <p><strong>√âvaluation m√©dicale prolong√©e et prise en charge √©largie</strong></p>
  <ul>
    <li><input type="checkbox"> R√©√©valuation clinique r√©guli√®re</li>
    <li><input type="checkbox"> Prescription des traitements personnels du patient</li>
    <li><input type="checkbox"> Mise en place des traitements symptomatiques</li>
    <li><input type="checkbox"> Prescription en "si besoin" selon protocole</li>
    <li><input type="checkbox"> Examens compl√©mentaires prescrits (biologie, imagerie, etc.)</li>
    <li><input type="checkbox"> Surveillance infirmi√®re continue mise en ≈ìuvre</li>
    <li><input type="checkbox"> Coordination avec assistante sociale si besoin</li>
    <li><input type="checkbox"> Mise √† jour du dossier m√©dical et DPI</li>
  </ul>

  <p><strong>Pr√©paration √† l‚Äôorientation</strong></p>
  <ul>
    <li><input type="radio" name="orientationLongue" value="uhcd"> Hospitalisation en UHCD</li>
    <li><input type="radio" name="orientationLongue" value="medchir"> Hospitalisation M√©decine / Chirurgie / GCS</li>
    <li><input type="radio" name="orientationLongue" value="transfert"> Transfert vers autre √©tablissement</li>
    <li><input type="radio" name="orientationLongue" value="retour"> Retour √† domicile</li>
    <li><input type="radio" name="orientationLongue" value="geriatrie"> Hospitalisation G√©riatrie GCS</li>
  </ul>

  <div id="docFiliereLongue" style="margin-top:15px;">
    <p><strong>üìÑ Documents et v√©rifications √† effectuer :</strong></p>
    <ul>
      <li><input type="checkbox"> Lettre de liaison m√©dicale</li>
      <li><input type="checkbox"> Prescription sur 24h y compris traitements personnels</li>
      <li><input type="checkbox"> Accord du patient pour hospitalisation</li>
      <li><input type="checkbox"> Accord du m√©decin r√©f√©rent</li>
      <li><input type="checkbox"> Fiche d‚Äôorientation renseign√©e dans le DPI</li>
      <li><input type="checkbox"> Codage et compl√©tude dossier (CIM-10, GEMSA, CCMU)</li>
    </ul>
  </div>

  <textarea name="commentairesFiliereLongue" placeholder="Commentaires ou √©l√©ments sp√©cifiques √† la fili√®re longue..." style="width:100%; height:60px;"></textarea>
</fieldset>

<!-- Score global + section r√©sum√© -->
<fieldset>
  <legend style="color:#007BFF; font-size:13pt;">R√©sum√© de conformit√© global</legend>
  <div id="globalConformityAlert"
       style="margin:10px 0; padding:10px; border-radius:5px; font-weight:bold; text-align:center; border:1px solid #ccc; background:#f9f9f9;">
    En attente...
  </div>
</fieldset>

<!-- Signature & Boutons -->
<fieldset>
  <legend style="color:#007BFF; font-size:13pt;">Signature du professionnel</legend>
  <label>Nom : <input type="text" style="width:200px;"></label><br>
  <button onclick="window.print()" style="margin-top:10px; font-weight:bold;">üñ®Ô∏è Imprimer / PDF</button>
  <button onclick="if(confirm('Confirmez-vous vouloir r√©initialiser le formulaire ?')) location.reload();"
          style="margin-top:10px; font-weight:bold; background:#f44336; color:white;">
    ‚ôªÔ∏è R√©initialiser
  </button>
</fieldset>

<!-- Sous-sections bloc, palliatifs, m√©decine, chirurgie, ambulatoire, etc. -->
<fieldset id="sousSectionBloc" style="display:none;">
  <legend>Sp√©cialit√© chirurgicale ‚Äì Bloc op√©ratoire</legend>
  <label><input type="radio" name="blocSpecialite" value="orthopedie"> Orthop√©die</label><br>
  <!-- ... -->
</fieldset>

<fieldset id="sousSectionPalliatif" style="display:none;">
  <legend>Parcours soins palliatifs</legend>
  <ul>
    <li><input type="checkbox"> √âvaluation de la douleur</li>
    <li><input type="checkbox"> Respect des directives anticip√©es</li>
  </ul>
</fieldset>

<fieldset id="sousSectionMedecine" style="display:none;">
  <legend>Sp√©cialit√© ‚Äì M√©decine</legend>
  <label><input type="radio" name="medecineSpecialite" value="oncologie"> Oncologie</label><br>
  <label><input type="radio" name="medecineSpecialite" value="gastro"> Gastro-ent√©rologie</label><br>
</fieldset>

<!-- etc. chirurgie, ambulatoire... -->

</body>
</html>

